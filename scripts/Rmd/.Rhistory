library(car)
library(reshape2)
library(ggplot2)
library("lme4")
library("car")
library(lmerTest)
library(vtable)
library(tidyverse)
library(stats)
library(gplots)
library("sandwich")
library(pacman)
library(dplyr)
library(AER)
library(here)
library(readxl)
library(naniar)
library(stringr)
library(ggplot2)
library(stargazer)
library(ggalt)
library(broom)
library(sandwich)
library(lmtest)
library(scales)
library(tidyr)
library(haven)
library(googledrive)
library(semTools)
library(lavaan)
library(forcats)
library(glmnet)
library(sjPlot)
filename = "../../rawdata/sessions/tutor_copilot_session_level.csv"
print(filename)
df = read.csv(filename)
# Make into factors
df$TUTOR_COPILOT_ASSIGNMENT = factor(df$TUTOR_COPILOT_ASSIGNMENT)
# Create a new column STRATUM by concatenating SCHOOL_NAME and GRADE
df <- df %>%
mutate(STRATUM = paste(SCHOOL_NAME, GRADE, sep = "."))
df$STRATUM = factor(df$STRATUM)
df$LESSON_OBJECTIVE = factor(df$LESSON_OBJECTIVE)
df$STUDENT_ID = factor(df$STUDENT_ID)
df$TUTOR_ID = factor(df$TUTOR_ID)
df$STUDENT_TUTOR = factor(df$STUDENT_TUTOR)
# Tutor Covariates
df$TUTOR_IS_FEMALE[is.na(df$TUTOR_IS_FEMALE)]  <- 2 #missing category
df$TUTOR_IS_FEMALE = factor(df$TUTOR_IS_FEMALE)
# Student Covariates
df$STUDENT_IS_FEMALE[is.na(df$STUDENT_IS_FEMALE)]  <- 2 #missing category
df$STUDENT_IS_FEMALE = factor(df$STUDENT_IS_FEMALE)
df$STUDENT_RACE_ETHNICITY[is.na(df$STUDENT_RACE_ETHNICITY)]  <- 2 #missing category
df$STUDENT_RACE_ETHNICITY = factor(df$STUDENT_RACE_ETHNICITY)
df$STUDENT_FREE_REDUCED_LUNCH[is.na(df$STUDENT_FREE_REDUCED_LUNCH)]  <- 2 #missing category
df$STUDENT_FREE_REDUCED_LUNCH = factor(df$STUDENT_FREE_REDUCED_LUNCH)
df$STUDENT_SPECIAL_EDUCATION[is.na(df$STUDENT_SPECIAL_EDUCATION)]  <- 2 #missing category
df$STUDENT_SPECIAL_EDUCATION = factor(df$STUDENT_SPECIAL_EDUCATION)
df$STUDENT_LEP[is.na(df$STUDENT_LEP)]  <- 2 #missing category
df$STUDENT_LEP = factor(df$STUDENT_LEP)
# whether EXIT_TICKET was attempted.
df$EXIT_TICKET_ATTEMPTED = ifelse(!is.na(df$EXIT_TICKET_ATTEMPETED) & df$EXIT_TICKET_ATTEMPETED != 0, 1, 0)
# whether EXIT_TICKET was passed (conditioned on it being taken; otherwise NA)
df$EXIT_TICKET_PASSED <- ifelse(df$EXIT_TICKET_ATTEMPTED == 1 & df$EXIT_TICKET >= 66.66, 1,
ifelse(df$EXIT_TICKET_ATTEMPTED == 1 & df$EXIT_TICKET < 66.66, 0, NA))
# whether EXIT_TICKET was passed  -- inclusive so:
df$EXIT_TICKET_PASSED_INCLUSIVE <- ifelse(df$EXIT_TICKET_ATTEMPTED == 1 & df$EXIT_TICKET >= 66.66, 1,
ifelse(df$EXIT_TICKET_ATTEMPTED == 1 & df$EXIT_TICKET < 66.66, 0, 0))
colnames(df)
